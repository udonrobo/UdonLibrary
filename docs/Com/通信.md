# é€šä¿¡

é€šä¿¡ ğŸ˜€ğŸ˜€

## é€å—ä¿¡ãƒ‡ãƒ¼ã‚¿ã®æŠ½è±¡åŒ–

ãƒã‚¤ã‚³ãƒ³é–“ã®ãƒ‡ãƒ¼ã‚¿é€šä¿¡ã«ãŠã„ã¦ã€ç¾åœ¨ã¾ã§æœ¬ãƒ­ãƒœç ”ã§ã¯é€ä¿¡ã™ã‚‹ãƒã‚¤ãƒˆåˆ—ã‚’ç›´æ¥æ“ä½œã—ã¦é€šä¿¡ã‚’è¡Œã£ã¦ã„ã¾ã—ãŸã€‚ã“ã®æ–¹å¼ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ã‚ã‹ã‚Šã‚„ã™ã„ã®ã§ã™ãŒæ¬¡ã®ã‚ˆã†ãªå•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚

- ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ«ãƒˆãŒèµ·ãã‚„ã™ã„ã€‚
- é€ä¿¡å´ã¨å—ä¿¡å´ã§ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ãã‚ãˆãªã„ã¨æ­£å¸¸ã«é€šä¿¡ã§ããªã„ã€‚
- å„ãƒã‚¤ãƒˆã«ã©ã‚“ãªãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ã„ã‚‹ã‹é€ä¿¡å´ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’è¦‹ãªã„ã¨ã‚ã‹ã‚‰ãªã„ã€‚
- æµ®å‹•å°æ•°ç‚¹ã®é€šä¿¡ãŒå›°é›£ã€‚
- 1 ãƒã‚¤ãƒˆä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿(int å‹ãªã©)ã‚’é€ã‚‹ã«ã¯ãƒã‚¤ãƒˆåˆ—ã«å¤‰æ›ã™ã‚‹å‡¦ç†ã‚’ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚

ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã€ãƒã‚¤ãƒˆåˆ—ã§ã¯ãªããƒ¡ãƒƒã‚»ãƒ¼ã‚¸(æ§‹é€ ä½“)ã‚’ä½¿ã£ã¦ã‚„ã‚Šå–ã‚Šã‚’è¡Œã†æ–¹å¼ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§æ¬¡ã®ã‚ˆã†ãªåˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

- æ§‹é€ ä½“ã®å„ãƒ¡ãƒ³ãƒã«ã¯åå‰ãŒã¤ã„ã¦ã„ã‚‹ãŸã‚ã€ã©ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã‚‹ã‹æ˜ç¢ºã€‚
- ã©ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚„ã‚Šå–ã‚Šã™ã‚‹ã‹ã•ãˆçŸ¥ã‚Œã°é€šä¿¡ã§ãã‚‹ã®ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä½¿ã„ã¾ã‚ã—ãŒã—ã‚„ã™ã„ã€‚
- æµ®å‹•å°æ•°ç‚¹ãªã©ã® 1 ãƒã‚¤ãƒˆã«åã¾ã‚‰ãªã„å‹ã‚‚ãƒ¡ãƒ³ãƒã«å®šç¾©ã™ã‚‹ã ã‘ã§ã‚„ã‚Šå–ã‚Šã§ãã‚‹ã€‚
- èª¤ã‚Šåˆ¤å®šãŒå®¹æ˜“

ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ç›´æ¥ã‚„ã‚Šå–ã‚Šã§ããªã„ã®ã§å†…éƒ¨ã§ãƒã‚¤ãƒˆåˆ—ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ã¦é€šä¿¡ã—ã¾ã™ã€‚

å…·ä½“çš„ã«ã¯æ¬¡ã®ã‚ˆã†ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å®šç¾©ã—ã¦ã‚„ã‚Šå–ã‚Šã—ã¾ã™ã€‚(é€šä¿¡å‡¦ç†ã¯çœç•¥)

```cpp
struct Vector2
{
    double x;
    double y;
    UDON_PARSABLE(x, y);  // å„ãƒ¡ãƒ³ãƒã‚’ãƒ‘ãƒ¼ã‚¹å¯èƒ½ã«ã™ã‚‹ã“ã¨ã§ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
};
```

```cpp
// é€ä¿¡è€…
void loop()
{
    Vector2 vector { 100, 200 };

    // æ§‹é€ ä½“ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ -> ãƒã‚¤ãƒˆåˆ—
    const std::vector<uint8_t> packed = Udon::Pack(vector);

    // packedã‚’é€ä¿¡...
}

// å—ä¿¡è€…
void loop()
{
    // buffer(ãƒã‚¤ãƒˆåˆ—)ã«å—ä¿¡...
    const Udon::Optional<Vector2> unpacked = Udon::Unpack<Vector2>(buffer);

    if(unpacked)
    {
        // ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºæˆåŠŸ
        Serial.print(unpacked->x);
        Serial.print(unpacked->y);
        Serial.println();
    }
    else
    {
        // ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¤±æ•—(ãƒ‡ãƒ¼ã‚¿ã®ç ´æã‚’æ¤œå‡º)
        Serial.println("unpack failed");
    }
}
```
